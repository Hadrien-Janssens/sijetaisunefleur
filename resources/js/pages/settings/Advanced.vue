<script setup lang="ts">
import { Head, router } from '@inertiajs/vue3';

import HeadingSmall from '@/components/HeadingSmall.vue';
import { Button } from '@/components/ui/button';
import { type BreadcrumbItem } from '@/types';

import AppLayout from '@/layouts/AppLayout.vue';
import SettingsLayout from '@/layouts/settings/Layout.vue';

const breadcrumbItems: BreadcrumbItem[] = [
    {
        title: 'Param√®tres Avanc√©s',
        href: '/settings/appearance',
    },
];

const deleteHoldTickets = () => {
    if (confirm('Es-tu s√ªr de vouloir supprimer les tickets vieux de plus de 5 ans ?')) {
        router.get(
            '/settings/advanced/delete-hold-tickets',
            {},
            {
                preserveState: true,
                preserveScroll: true,
                replace: true,
            },
        );
    }
};
</script>

<template>
    <AppLayout :breadcrumbs="breadcrumbItems">
        <Head title="Param√®tre avanc√©s" />

        <SettingsLayout>
            <div class="space-y-6">
                <HeadingSmall title="Param√®tre avanc√©s" description="" />

                <p>
                    üö® Ton application commence √† ralentir ? Tu peux supprimer les tickets vieux de plus de 5 ans en cliquant sur ce bouton, mais
                    contact quelqu'un pour sauvegarder les donn√©es avant, on est pas √† l'abri d'un bug pour ce genre de t√¢ches. Il vaut donc mieux
                    proc√©der √† une sauvegarde.
                </p>

                <Button variant="destructive" @click="deleteHoldTickets">Supprimer les anciens tickets</Button>
            </div>
        </SettingsLayout>
    </AppLayout>
</template>
